{% set lastDate = None %}

<div id="error-popup" class="alert alert-danger alert-dismissible" style="max-width: 570px; margin: 20px; display: none;" role="alert">
  <a class="close" onclick="$('.alert').hide()">Ã—</a>
  <div id="error-popup-message"></div>
</div>

<div>
{% for r in reservations %}
	{% if lastDate != r.start.date() %}
	{% set lastDate = r.start.date() %}
	{% set dayOfWeek = weekdays[r.start.date().weekday()] %}
	</div><div class="res-date">
	<button type="button" class="btn btn-warning btn-sm active">{{ dayOfWeek }}<br/>{{ lastDate }}</button>
	<br/>
	{% endif %}
    {% if r.state == 0 %}
    <a onclick="javascript:makeReservation({{ r.object }}, {{ r.startTs }}, {{ r.endTs }});"
       class="btn btn-default btn-sm" role="button">{{ r.start.time() }}<br/>-<br/>{{ r.end.time() }}</a>
    {% endif %}
    {% if r.state == 1 %}
    <button type="button" class="btn btn-danger btn-sm active">{{ r.start.time() }}<br/>-<br/>{{ r.end.time() }}</button>
    {% endif %}
    {% if r.state == 2 %}
    <a onclick="javascript:cancelReservation({{ r.object }}, {{ r.startTs }});"
	   class="btn btn-success btn-sm active" role="button">{{ r.start.time() }}<br/>-<br/>{{ r.end.time() }}</a>
    {% endif %}
    {% if r.state == 3 %}
    <button type="button" class="btn btn-default btn-sm disabled" style="background-color: darkgrey;">{{ r.start.time() }}<br/>-<br/>{{ r.end.time() }}</button>
    {% endif %}
    <br/>
{% endfor %}
</div>
<button id="next-btn" type="button" class="btn btn-warning btn-sm active">Next -&gt;</button>
<br/>
<button id="prev-btn" type="button" class="btn btn-warning btn-sm active">&lt;- Prev</button>

<script type="text/javascript">
curTs = {{ curTs }};

$(function() {
  $("#next-btn").click(function(e) {
  	loadReservations({{ object }}, {{ nextTs }});
  });
});

$(function() {
  $("#prev-btn").click(function(e) {
    loadReservations({{ object }}, {{ prevTs }});
  });
});
</script>